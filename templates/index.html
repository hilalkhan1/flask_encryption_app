<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encryption & Decryption</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="container">
        <h1>Encryption & Decryption Tool</h1>
        <form action="/" method="POST">
            <label for="algorithm">Choose an algorithm:</label>
            <select name="algorithm" id="algorithm" required>
                <option value="ROT-13">ROT-13</option>
                <option value="Caesar">Caesar Cipher</option>
                <option value="Columnar">Columnar Transposition</option>
            </select>

            <label for="action">Choose an action:</label>
            <div>
                <input type="radio" id="encrypt" name="action" value="Encrypt" checked>
                <label for="encrypt">Encrypt</label>
                <input type="radio" id="decrypt" name="action" value="Decrypt">
                <label for="decrypt">Decrypt</label>
            </div>

            <div id="text-input-container">
                <label for="text">Enter your text:</label>
                <textarea id="text" name="text" rows="4" required></textarea>
            </div>

            <div id="shift-key-container" style="display: none;">
                <label for="shift">Shift (for Caesar Cipher):</label>
                <input type="number" id="shift" name="shift" min="1" max="25">
            </div>

            <div id="key-container" style="display: none;">
                <label for="key">Key (for Columnar Transposition):</label>
                <input type="text" id="key" name="key">
            </div>

            <button type="submit">Submit</button>
        </form>

        {% if result %}
        <div class="result">
            <h2>Result:</h2>
            <p>{{ result }}</p>
        </div>
        {% endif %}
    </div>

    <script>
        const algorithmDropdown = document.getElementById('algorithm');
        const actionEncrypt = document.getElementById('encrypt');
        const actionDecrypt = document.getElementById('decrypt');
        const textInputContainer = document.getElementById('text-input-container');
        const textInput = document.getElementById('text');
        const shiftKeyContainer = document.getElementById('shift-key-container');
        const keyContainer = document.getElementById('key-container');

        // Toggle fields based on selected algorithm
        algorithmDropdown.addEventListener('change', () => {
            const selectedAlgorithm = algorithmDropdown.value;
            shiftKeyContainer.style.display = selectedAlgorithm === 'Caesar' ? 'block' : 'none';
            keyContainer.style.display = selectedAlgorithm === 'Columnar' ? 'block' : 'none';

            // Clear irrelevant fields when not needed
            if (selectedAlgorithm !== 'Caesar') {
                document.getElementById('shift').value = '';
            }
            if (selectedAlgorithm !== 'Columnar') {
                document.getElementById('key').value = '';
            }
        });

        // Toggle input text field based on action
        actionEncrypt.addEventListener('click', () => {
            textInputContainer.style.display = 'block';
            textInput.required = true; // Make text field required for encryption
        });

        actionDecrypt.addEventListener('click', () => {
            textInputContainer.style.display = 'none';
            textInput.required = false; // Remove required attribute for decryption
            textInput.value = ''; // Clear the text field
        });
    </script>
</body>
</html>
